<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Greek Verbs â€“ Î•Î¯Î¼Î±Î¹</title>
  <style>
    body{
      margin:0;
      font-family:-apple-system,system-ui;
      background:#0b1220;
      color:#e8eefc;
      text-align:center;
      padding:16px;
    }
    h1{font-size:20px;margin:10px 0 4px;}
    .card{
      max-width:900px;
      margin:0 auto;
    }
    .prompt{
      margin:16px 0 12px;
      padding:16px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(255,255,255,0.06);
      font-size:22px;
      font-weight:900;
      line-height:1.2;
    }
    .blank{
      color:#ffd466;
      font-weight:900;
    }
    .hint{opacity:0.85;margin:8px 0 12px;}
    input{
      width:100%;
      padding:14px 12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.2);
      background:#121c33;
      color:#e8eefc;
      font-size:20px;
      font-weight:800;
      outline:none;
    }
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-top:10px;}
    .btn{
      width:100%;
      padding:14px;
      font-size:18px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.06);
      color:#e8eefc;
      font-weight:900;
    }
    #status{
      margin-top:12px;
      min-height:22px;
      font-size:18px;
      font-weight:900;
    }
    .good{color:rgba(96,255,165,0.95);}
    .bad{color:rgba(255,96,96,0.95);}
    .meta{
      margin-top:10px;
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
      font-size:16px;
      opacity:0.95;
    }
    .pill{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(255,255,255,0.06);
      font-weight:900;
    }
    .flag{
      position:fixed;right:12px;bottom:12px;
      font-size:26px;opacity:0.95;user-select:none;
    }
    .small{opacity:0.8;font-size:14px;margin-top:6px}
  </style>
</head>
<body>
  <div class="card">
    <h1>Greek Verbs â€“ Î•Î¯Î¼Î±Î¹ (typing)</h1>

    <div class="prompt" id="prompt"></div>
    <div class="hint">Type the missing form of <b>ÎµÎ¯Î¼Î±Î¹</b> using your Greek keyboard.</div>

    <input id="answer" placeholder="Type here (Ï€.Ï‡. ÎµÎ¯Î¼Î±Î¹, ÎµÎ¯ÏƒÎ±Î¹, ÎµÎ¯Î½Î±Î¹â€¦)" autocomplete="off" autocapitalize="none" autocorrect="off" spellcheck="false">

    <div class="row">
      <button class="btn" id="checkBtn">âœ… Check</button>
      <button class="btn" id="hearBtn">ğŸ”Š Hear sentence</button>
    </div>

    <div id="status"></div>

    <div class="meta">
      <div class="pill">Î£Ï‰ÏƒÏ„Î¬: <span id="correctCount">0</span></div>
      <div class="pill">Î£ÎµÎ¹ÏÎ¬: <span id="streakCount">0</span></div>
    </div>

    <div class="small">Tip: accents matter less here. Focus on picking the right form.</div>
  </div>

  <div class="flag">ğŸ‡¬ğŸ‡·</div>

<script>
/* ---------------- Voice ---------------- */
let greekVoice = null;
function loadGreekVoice(){
  const voices = speechSynthesis.getVoices();
  greekVoice =
    voices.find(v => (v.lang||"").toLowerCase()==="el-gr") ||
    voices.find(v => (v.lang||"").toLowerCase().startsWith("el")) ||
    null;
}
speechSynthesis.onvoiceschanged = loadGreekVoice;
loadGreekVoice();

function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  if(greekVoice) u.voice = greekVoice;
  u.lang = "el-GR";
  u.rate = 0.9;
  u.pitch = 1.0;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}
function waitForSpeechEnd(text){
  return new Promise(resolve=>{
    const u = new SpeechSynthesisUtterance(text);
    if(greekVoice) u.voice = greekVoice;
    u.lang = "el-GR";
    u.rate = 0.9;
    u.pitch = 1.0;
    u.onend = resolve;
    u.onerror = resolve;
    speechSynthesis.speak(u);
  });
}

/* ---------------- Helpers ---------------- */
function norm(s){
  return (s||"")
    .trim()
    .toLowerCase()
    .normalize("NFD")
    .replace(/[\u0300-\u036f]/g,""); // strip accents
}

/* ---------------- Game data ----------------
   Each item: sentence with ___ blank, expected answer, full correct sentence */
const items = [
  { s:"Î•Î³Ï ___ Î· ÎœÎ­Î³ÎºÎ±Î½.", a:"ÎµÎ¯Î¼Î±Î¹", full:"Î•Î³Ï ÎµÎ¯Î¼Î±Î¹ Î· ÎœÎ­Î³ÎºÎ±Î½." },
  { s:"Î•ÏƒÏ ___ Î±Ï€ÏŒ Ï„Î·Î½ ÎšÏÏ€ÏÎ¿;", a:"ÎµÎ¯ÏƒÎ±Î¹", full:"Î•ÏƒÏ ÎµÎ¯ÏƒÎ±Î¹ Î±Ï€ÏŒ Ï„Î·Î½ ÎšÏÏ€ÏÎ¿;" },
  { s:"Î‘Ï…Ï„ÏŒ ___ ÎºÎ±Ï†Î­Ï‚.", a:"ÎµÎ¯Î½Î±Î¹", full:"Î‘Ï…Ï„ÏŒ ÎµÎ¯Î½Î±Î¹ ÎºÎ±Ï†Î­Ï‚." },
  { s:"Î•Î¼ÎµÎ¯Ï‚ ___ ÏƒÏ„Î¿ ÏƒÏ€Î¯Ï„Î¹.", a:"ÎµÎ¯Î¼Î±ÏƒÏ„Îµ", full:"Î•Î¼ÎµÎ¯Ï‚ ÎµÎ¯Î¼Î±ÏƒÏ„Îµ ÏƒÏ„Î¿ ÏƒÏ€Î¯Ï„Î¹." },
  { s:"Î•ÏƒÎµÎ¯Ï‚ ___ Î­Ï„Î¿Î¹Î¼Î¿Î¹;", a:"ÎµÎ¯ÏƒÏ„Îµ", full:"Î•ÏƒÎµÎ¯Ï‚ ÎµÎ¯ÏƒÏ„Îµ Î­Ï„Î¿Î¹Î¼Î¿Î¹;" },
  { s:"Î‘Ï…Ï„Î¿Î¯ ___ Ï†Î¯Î»Î¿Î¹ Î¼Î¿Ï….", a:"ÎµÎ¯Î½Î±Î¹", full:"Î‘Ï…Ï„Î¿Î¯ ÎµÎ¯Î½Î±Î¹ Ï†Î¯Î»Î¿Î¹ Î¼Î¿Ï…." },

  { s:"Î£Î®Î¼ÎµÏÎ± ___ ÎºÎ±Î»Î¬.", a:"ÎµÎ¯Î¼Î±Î¹", full:"Î£Î®Î¼ÎµÏÎ± ÎµÎ¯Î¼Î±Î¹ ÎºÎ±Î»Î¬." },
  { s:"Î Î¿Ï ___ Ï„ÏÏÎ±;", a:"ÎµÎ¯ÏƒÎ±Î¹", full:"Î Î¿Ï ÎµÎ¯ÏƒÎ±Î¹ Ï„ÏÏÎ±;" },
  { s:"Î¤Î¿ Î¼Î±Î³Î±Î¶Î¯ ___ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ.", a:"ÎµÎ¯Î½Î±Î¹", full:"Î¤Î¿ Î¼Î±Î³Î±Î¶Î¯ ÎµÎ¯Î½Î±Î¹ Î±Î½Î¿Î¹Ï‡Ï„ÏŒ." },
  { s:"Î•Î¼ÎµÎ¯Ï‚ ___ ÎºÎ¿Ï…ÏÎ±ÏƒÎ¼Î­Î½Î¿Î¹.", a:"ÎµÎ¯Î¼Î±ÏƒÏ„Îµ", full:"Î•Î¼ÎµÎ¯Ï‚ ÎµÎ¯Î¼Î±ÏƒÏ„Îµ ÎºÎ¿Ï…ÏÎ±ÏƒÎ¼Î­Î½Î¿Î¹." },
  { s:"Î•ÏƒÎµÎ¯Ï‚ ___ ÎµÎ´Ï;", a:"ÎµÎ¯ÏƒÏ„Îµ", full:"Î•ÏƒÎµÎ¯Ï‚ ÎµÎ¯ÏƒÏ„Îµ ÎµÎ´Ï;" },
  { s:"Î¤Î± Ï€Î±Î¹Î´Î¹Î¬ ___ ÏƒÏ„Î¿ ÏƒÏ‡Î¿Î»ÎµÎ¯Î¿.", a:"ÎµÎ¯Î½Î±Î¹", full:"Î¤Î± Ï€Î±Î¹Î´Î¹Î¬ ÎµÎ¯Î½Î±Î¹ ÏƒÏ„Î¿ ÏƒÏ‡Î¿Î»ÎµÎ¯Î¿." },

  { s:"Î¤Î¿ ÏŒÎ½Î¿Î¼Î¬ Î¼Î¿Ï… ___ ÎœÎ­Î³ÎºÎ±Î½.", a:"ÎµÎ¯Î½Î±Î¹", full:"Î¤Î¿ ÏŒÎ½Î¿Î¼Î¬ Î¼Î¿Ï… ÎµÎ¯Î½Î±Î¹ ÎœÎ­Î³ÎºÎ±Î½." },
  { s:"Î•Î³Ï ___ Î±Ï€ÏŒ Ï„Î·Î½ Î‘Î³Î³Î»Î¯Î±.", a:"ÎµÎ¯Î¼Î±Î¹", full:"Î•Î³Ï ÎµÎ¯Î¼Î±Î¹ Î±Ï€ÏŒ Ï„Î·Î½ Î‘Î³Î³Î»Î¯Î±." },
  { s:"Î•ÏƒÏ ___ Ï€Î¿Î»Ï ÎµÏ…Î³ÎµÎ½Î¹ÎºÏŒÏ‚.", a:"ÎµÎ¯ÏƒÎ±Î¹", full:"Î•ÏƒÏ ÎµÎ¯ÏƒÎ±Î¹ Ï€Î¿Î»Ï ÎµÏ…Î³ÎµÎ½Î¹ÎºÏŒÏ‚." },
  { s:"Î•Î¼ÎµÎ¯Ï‚ ___ ÏƒÏ„Î·Î½ Î‘Î¸Î®Î½Î±.", a:"ÎµÎ¯Î¼Î±ÏƒÏ„Îµ", full:"Î•Î¼ÎµÎ¯Ï‚ ÎµÎ¯Î¼Î±ÏƒÏ„Îµ ÏƒÏ„Î·Î½ Î‘Î¸Î®Î½Î±." },
  { s:"Î•ÏƒÎµÎ¯Ï‚ ___ ÏƒÏ„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ Î¼Î­ÏÎ¿Ï‚.", a:"ÎµÎ¯ÏƒÏ„Îµ", full:"Î•ÏƒÎµÎ¯Ï‚ ÎµÎ¯ÏƒÏ„Îµ ÏƒÏ„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ Î¼Î­ÏÎ¿Ï‚." },
  { s:"Î‘Ï…Ï„Î­Ï‚ ___ ÎºÎ±Î»Î­Ï‚ Î¹Î´Î­ÎµÏ‚.", a:"ÎµÎ¯Î½Î±Î¹", full:"Î‘Ï…Ï„Î­Ï‚ ÎµÎ¯Î½Î±Î¹ ÎºÎ±Î»Î­Ï‚ Î¹Î´Î­ÎµÏ‚." }
];

let currentItem = null;
let correct = 0;
let streak = 0;
let locked = false;

const promptEl = document.getElementById("prompt");
const answerEl = document.getElementById("answer");
const statusEl = document.getElementById("status");
const correctEl = document.getElementById("correctCount");
const streakEl = document.getElementById("streakCount");

const praise = ["ÎœÏ€ÏÎ¬Î²Î¿", "Î¤Î­Î»ÎµÎ¹Î±", "Î£Ï‰ÏƒÏ„ÏŒ", "Î Î¿Î»Ï ÎºÎ±Î»Î¬"];
const tryAgain = "Î”Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î¾Î±Î½Î¬";

function pick(){
  locked = false;
  currentItem = items[Math.floor(Math.random()*items.length)];
  promptEl.innerHTML = currentItem.s.replace("___", "<span class='blank'>___</span>");
  statusEl.className = "";
  statusEl.textContent = "";
  answerEl.value = "";
  answerEl.focus();
}

async function check(){
  if(locked) return;
  const typed = norm(answerEl.value);
  const expected = norm(currentItem.a);

  if(typed === expected){
    locked = true;
    correct += 1;
    streak += 1;
    correctEl.textContent = String(correct);
    streakEl.textContent = String(streak);

    const msg = praise[Math.floor(Math.random()*praise.length)];
    statusEl.className = "good";
    statusEl.textContent = "âœ… " + msg;

    // Speak the full sentence, then praise
    speechSynthesis.cancel();
    await waitForSpeechEnd(currentItem.full);
    await waitForSpeechEnd(msg);

    setTimeout(pick, 200);
  } else {
    streak = 0;
    streakEl.textContent = String(streak);
    statusEl.className = "bad";
    statusEl.textContent = "âŒ " + tryAgain;
    speak(tryAgain);
  }
}

function hearSentence(){
  speak(currentItem.full);
}

document.getElementById("checkBtn").onclick = check;
document.getElementById("hearBtn").onclick = hearSentence;

// Submit with Enter on iPhone external keyboards too
answerEl.addEventListener("keydown", (e)=>{
  if(e.key === "Enter") check();
});

pick();
</script>
</body>
</html>
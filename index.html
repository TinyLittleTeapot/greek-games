<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Greek Numbers</title>
  <style>
    body{
      margin:0;
      font-family:-apple-system,system-ui;
      background:#0b1220;
      color:#e8eefc;
      text-align:center;
      padding:16px;
    }
    h1{font-size:20px;margin:10px 0 4px;}
    #num{font-size:56px;font-weight:900;margin:18px 0 10px;}
    .hint{opacity:0.85;margin-bottom:12px;}

    .topRow{display:grid;gap:10px;margin-top:10px;}

    select{
      width:100%;
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.2);
      background:#121c33;
      color:#e8eefc;
      font-size:16px;
      font-weight:800;
    }

    .pill{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,0.12);
      background:rgba(255,255,255,0.06);
      font-weight:800;
      display:inline-block;
    }

    .topBtn{
      width:100%;
      padding:14px;
      font-size:18px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.2);
      background:rgba(255,255,255,0.06);
      color:#e8eefc;
      font-weight:800;
    }

    #choices{display:grid;gap:12px;margin-top:12px;}

    button.choice{
      width:100%;
      padding:16px;
      font-size:22px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,0.2);
      background:#121c33;
      color:#e8eefc;
      font-weight:800;
    }
    button.choice.good{
      background:rgba(96,255,165,0.18);
      border-color:rgba(96,255,165,0.55);
    }
    button.choice.bad{
      background:rgba(255,96,96,0.18);
      border-color:rgba(255,96,96,0.55);
    }

    #status{
      margin-top:12px;
      min-height:22px;
      font-size:18px;
      font-weight:900;
    }

    .flag{
      position:fixed;
      right:12px;
      bottom:12px;
      font-size:26px;
      opacity:0.95;
      user-select:none;
    }
  </style>
</head>
<body>

<h1>Greek Numbers</h1>
<div id="num">â€“</div>
<div class="hint">Î Î¬Ï„Î± Ï„Î¿ ÏƒÏ‰ÏƒÏ„ÏŒ ÏƒÏ„Î± Î•Î»Î»Î·Î½Î¹ÎºÎ¬</div>

<div class="topRow">
  <button class="topBtn" onclick="showLevelSelect()">ğŸ”™ Change level</button>

  <select id="level" onchange="startGame()">
    <option value="20">Level: 0 Î­Ï‰Ï‚ 20</option>
    <option value="100">Level: 0 Î­Ï‰Ï‚ 100</option>
    <option value="9999" selected>Level: 0 Î­Ï‰Ï‚ 9999</option>
  </select>

  <button class="topBtn" onclick="sayAnswer()">ğŸ”Š Î†ÎºÎ¿Ï…ÏƒÎµ Ï„Î·Î½ Î±Ï€Î¬Î½Ï„Î·ÏƒÎ·</button>

  <div class="pill">Î£Ï‰ÏƒÏ„Î¬: <span id="correctCount">0</span></div>
</div>

<div id="choices"></div>
<div id="status"></div>

<div class="flag">ğŸ‡¬ğŸ‡·</div>

<script>
/* ------- Feedback phrases ------- */
const praise = ["ÎœÏ€ÏÎ¬Î²Î¿", "Î¤Î­Î»ÎµÎ¹Î±", "Î£Ï‰ÏƒÏ„ÏŒ", "Î Î¿Î»Ï ÎºÎ±Î»Î¬"];
const tryAgain = "Î”Î¿ÎºÎ¯Î¼Î±ÏƒÎµ Î¾Î±Î½Î¬";

/* ------- Game state ------- */
let current = 0;
let correctTotal = 0;
let maxRange = 9999;
let locked = false;

/* ------- Voice ------- */
let greekVoice = null;

/* ------- Tiny sound effects (no external files) ------- */
let audioCtx = null;
function ctx(){
  if(!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
  return audioCtx;
}
function beep(freq, ms, type="sine", vol=0.08){
  const c = ctx();
  const o = c.createOscillator();
  const g = c.createGain();
  o.type = type;
  o.frequency.value = freq;
  g.gain.value = vol;
  o.connect(g); g.connect(c.destination);
  o.start();
  setTimeout(()=>{ o.stop(); }, ms);
}
function wrongBuzzer(){
  beep(180,120,"square",0.09);
  setTimeout(()=>beep(140,180,"square",0.09),130);
}
function rightChime(){
  beep(660,90,"sine",0.06);
  setTimeout(()=>beep(880,120,"sine",0.06),110);
  setTimeout(()=>beep(990,140,"sine",0.06),250);
}

/* ------- Number words ------- */
const units = {
  0:"Î¼Î·Î´Î­Î½",1:"Î­Î½Î±",2:"Î´ÏÎ¿",3:"Ï„ÏÎ¯Î±",4:"Ï„Î­ÏƒÏƒÎµÏÎ±",5:"Ï€Î­Î½Ï„Îµ",
  6:"Î­Î¾Î¹",7:"ÎµÏ€Ï„Î¬",8:"Î¿ÎºÏ„Ï",9:"ÎµÎ½Î½Î­Î±"
};
const teens = {
  10:"Î´Î­ÎºÎ±",11:"Î­Î½Ï„ÎµÎºÎ±",12:"Î´ÏÎ´ÎµÎºÎ±",13:"Î´ÎµÎºÎ±Ï„ÏÎ¯Î±",14:"Î´ÎµÎºÎ±Ï„Î­ÏƒÏƒÎµÏÎ±",
  15:"Î´ÎµÎºÎ±Ï€Î­Î½Ï„Îµ",16:"Î´ÎµÎºÎ±Î­Î¾Î¹",17:"Î´ÎµÎºÎ±ÎµÏ€Ï„Î¬",18:"Î´ÎµÎºÎ±Î¿ÎºÏ„Ï",19:"Î´ÎµÎºÎ±ÎµÎ½Î½Î­Î±"
};
const tens = {
  20:"ÎµÎ¯ÎºÎ¿ÏƒÎ¹",30:"Ï„ÏÎ¹Î¬Î½Ï„Î±",40:"ÏƒÎ±ÏÎ¬Î½Ï„Î±",50:"Ï€ÎµÎ½Î®Î½Ï„Î±",60:"ÎµÎ¾Î®Î½Ï„Î±",
  70:"ÎµÎ²Î´Î¿Î¼Î®Î½Ï„Î±",80:"Î¿Î³Î´ÏŒÎ½Ï„Î±",90:"ÎµÎ½ÎµÎ½Î®Î½Ï„Î±"
};
const hundreds = {
  2:"Î´Î¹Î±ÎºÏŒÏƒÎ¹Î±",3:"Ï„ÏÎ¹Î±ÎºÏŒÏƒÎ¹Î±",4:"Ï„ÎµÏ„ÏÎ±ÎºÏŒÏƒÎ¹Î±",5:"Ï€ÎµÎ½Ï„Î±ÎºÏŒÏƒÎ¹Î±",6:"ÎµÎ¾Î±ÎºÏŒÏƒÎ¹Î±",
  7:"ÎµÏ€Ï„Î±ÎºÏŒÏƒÎ¹Î±",8:"Î¿ÎºÏ„Î±ÎºÏŒÏƒÎ¹Î±",9:"ÎµÎ½Î½Î¹Î±ÎºÏŒÏƒÎ¹Î±"
};

function under100(n){
  if(n<10) return units[n];
  if(n<20) return teens[n];
  if(n%10===0) return tens[n];
  const t = Math.floor(n/10)*10;
  const r = n%10;
  return tens[t] + " " + units[r];
}

function under1000(n){
  if(n<100) return under100(n);
  const h = Math.floor(n/100);
  const r = n%100;

  if(h===1){
    if(r===0) return "ÎµÎºÎ±Ï„ÏŒ";
    return "ÎµÎºÎ±Ï„ÏŒÎ½ " + under100(r);
  }

  const hWord = hundreds[h];
  if(r===0) return hWord;
  return hWord + " " + under100(r);
}

function thousandsPrefix(t){
  if(t===2) return "Î´ÏÎ¿";
  if(t===3) return "Ï„ÏÎµÎ¹Ï‚";
  if(t===4) return "Ï„Î­ÏƒÏƒÎµÏÎ¹Ï‚";
  if(t===5) return "Ï€Î­Î½Ï„Îµ";
  if(t===6) return "Î­Î¾Î¹";
  if(t===7) return "ÎµÏ€Ï„Î¬";
  if(t===8) return "Î¿ÎºÏ„Ï";
  if(t===9) return "ÎµÎ½Î½Î­Î±";
  return "";
}

function numberToGreek(n){
  if(n===0) return units[0];
  if(n<1000) return under1000(n);

  const t = Math.floor(n/1000);
  const r = n%1000;

  let left = "";
  if(t===1){
    left = "Ï‡Î¯Î»Î¹Î±";
  } else {
    left = thousandsPrefix(t) + " Ï‡Î¹Î»Î¹Î¬Î´ÎµÏ‚";
  }

  if(r===0) return left;
  return left + " " + under1000(r);
}

/* ------- Voice helpers ------- */
function loadGreekVoice(){
  const voices = speechSynthesis.getVoices();
  greekVoice =
    voices.find(v => (v.lang||"").toLowerCase()==="el-gr") ||
    voices.find(v => (v.lang||"").toLowerCase().startsWith("el")) ||
    null;
}
speechSynthesis.onvoiceschanged = loadGreekVoice;
loadGreekVoice();

function speak(text){
  const u = new SpeechSynthesisUtterance(text);
  if(greekVoice) u.voice = greekVoice;
  u.lang = "el-GR";
  u.rate = 0.9;
  u.pitch = 1.0;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function waitForSpeechEnd(text){
  return new Promise(resolve=>{
    const u = new SpeechSynthesisUtterance(text);
    if(greekVoice) u.voice = greekVoice;
    u.lang = "el-GR";
    u.rate = 0.9;
    u.pitch = 1.0;
    u.onend = resolve;
    u.onerror = resolve;
    speechSynthesis.speak(u);
  });
}

/* ------- UI actions ------- */
function sayAnswer(){
  speak(numberToGreek(current));
}

function startGame(){
  maxRange = Number(document.getElementById("level").value);
  correctTotal = 0;
  document.getElementById("correctCount").innerText = "0";
  document.getElementById("level").style.display = "none";
  document.getElementById("status").innerText = "";
  pickNew();
}

function showLevelSelect(){
  document.getElementById("level").style.display = "block";
  document.getElementById("status").innerText = "Î”Î¹Î¬Î»ÎµÎ¾Îµ ÎµÏ€Î¯Ï€ÎµÎ´Î¿";
}

/* ------- Game flow ------- */
function renderChoices(){
  const box = document.getElementById("choices");
  box.innerHTML = "";
  const correct = numberToGreek(current);

  let options = [correct];
  while(options.length<3){
    const rNum = Math.floor(Math.random()*(maxRange+1));
    const rText = numberToGreek(rNum);
    if(!options.includes(rText)) options.push(rText);
  }
  options.sort(()=>Math.random()-0.5);

  options.forEach(text=>{
    const b = document.createElement("button");
    b.className = "choice";
    b.innerText = text;
    b.onclick = () => handleChoice(b, text);
    box.appendChild(b);
  });
}

function pickNew(){
  locked = false;
  current = Math.floor(Math.random()*(maxRange+1));
  document.getElementById("num").innerText = current;
  document.getElementById("status").innerText = "";
  renderChoices();
}

async function handleChoice(btn, chosen){
  if(locked) return;

  const correct = numberToGreek(current);

  if(chosen === correct){
    locked = true;

    btn.classList.add("good");

    correctTotal += 1;
    document.getElementById("correctCount").innerText = String(correctTotal);

    const msg = praise[Math.floor(Math.random()*praise.length)];
    document.getElementById("status").innerText = "âœ… " + msg;

    // Sound + speech sequence: chime â†’ number (finish) â†’ chime â†’ praise
    rightChime();

    speechSynthesis.cancel();
    await waitForSpeechEnd(correct);

    rightChime();
    await waitForSpeechEnd(msg);

    // lock buttons and move on
    document.querySelectorAll("button.choice").forEach(b => b.disabled = true);
    setTimeout(pickNew, 300);
  } else {
    btn.classList.add("bad");
    document.getElementById("status").innerText = "âŒ " + tryAgain;

    wrongBuzzer();
    speak(tryAgain);
  }
}

/* Start with default level hidden behaviour:
   The selector is visible until user chooses a level (or changes it).
   If you want it to start immediately on 0â€“9999, uncomment the next line.
*/
// startGame();
pickNew();
</script>

</body>
</html>